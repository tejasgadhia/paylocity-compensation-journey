<!DOCTYPE html>
<html lang="en" data-theme="artistic" data-view="desktop">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   script-src 'self';
                   style-src 'self' 'unsafe-inline';
                   font-src 'self';
                   img-src 'self' data:;
                   connect-src 'none';
                   frame-ancestors 'none';
                   base-uri 'self';
                   form-action 'self';
                   object-src 'none';">
    <title>Paylocity Compensation Journey</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Open Graph meta tags for social sharing (#125) -->
    <meta property="og:title" content="Compensation Journey - Visualize Your Paylocity Data">
    <meta property="og:description" content="Transform your Paylocity pay history into beautiful charts, growth analytics, and future projections. 100% private - data never leaves your device.">
    <meta property="og:image" content="https://tejasgadhia.github.io/paylocity-compensation-journey/assets/og-image.webp">
    <meta property="og:url" content="https://tejasgadhia.github.io/paylocity-compensation-journey/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Compensation Journey">

    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Compensation Journey - Visualize Your Paylocity Data">
    <meta name="twitter:description" content="Transform your Paylocity pay history into charts, analytics, and projections. 100% private.">
    <meta name="twitter:image" content="https://tejasgadhia.github.io/paylocity-compensation-journey/assets/og-image.webp">

    <!-- Chart.js self-hosted, lazy-loaded dynamically when needed for faster landing page -->
    <!-- Main stylesheet (extracted for browser caching) -->
    <link rel="stylesheet" href="styles.css">
    <!-- Image Comparison Slider (self-hosted) -->
    <link rel="stylesheet" href="assets/css/img-comparison-slider.css">
    <!-- Any additional inline styles below this line -->
</head>
<body>
    <!-- Skip link for keyboard navigation -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- ==========================================
         DESKTOP BLOCK OVERLAY (#146)
         ========================================== -->
    <div id="desktopBlockOverlay" class="desktop-block-overlay">
        <div class="desktop-block-card">
            <div class="desktop-block-header">
                <div class="desktop-block-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="20" height="14" x="2" y="3" rx="2"/><path d="M8 21h8m-4-4v4"/></g></svg>
                </div>
                <div class="desktop-block-header-text">
                    <h1>Viewport Too Small</h1>
                    <div class="desktop-block-status">Unsupported</div>
                </div>
            </div>
            <div class="desktop-block-body">
                <p class="desktop-block-message">
                    This dashboard requires a minimum viewport width to display all compensation analytics properly.
                </p>
                <div class="desktop-block-requirements">
                    <div class="desktop-block-req-row">
                        <span>Min width</span>
                        <span class="desktop-block-req-value">1280px</span>
                    </div>
                    <div class="desktop-block-req-row current">
                        <span>Your width</span>
                        <span class="desktop-block-req-value" id="currentViewportWidth">&mdash;</span>
                    </div>
                    <div class="desktop-block-req-row recommended">
                        <span>Recommended</span>
                        <span class="desktop-block-req-value">1440px+</span>
                    </div>
                </div>
                <p class="desktop-block-hint">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m18 8l4 4l-4 4M2 12h20M6 8l-4 4l4 4"/></svg>
                    Works best on laptops (13"+) and desktop monitors
                </p>
            </div>
        </div>
    </div>

    <!-- ==========================================
         LANDING PAGE
         ========================================== -->
    <div id="landingPage" class="landing-page">
        <!-- Landing Header -->
        <header class="landing-header">
            <div class="landing-logo">
                <div class="landing-logo-icon">CJ</div>
                <span class="landing-logo-text">Compensation Journey</span>
            </div>
            <div class="landing-header-right">
                <span class="privacy-note">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></g></svg>
                    Data never leaves your device
                </span>
                <div class="landing-theme-toggle">
                    <button class="landing-theme-btn" data-theme="tactical" aria-label="Dark tactical theme" aria-pressed="false">Tactical</button>
                    <button class="landing-theme-btn active" data-theme="artistic" aria-label="Light artistic theme" aria-pressed="true">Artistic</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="landing-main">
            <!-- Left Column: Marketing & CTAs -->
            <div class="landing-left">
                <h1 class="landing-headline">Your Paylocity data,<br><em>visualized.</em></h1>
                <p class="landing-subheadline">Turn your pay history into beautiful charts, growth analytics, and future projections.</p>

                <div class="features-label">Click to preview</div>
                <div class="features-grid">
                    <button class="feature-chip active" data-tab="home">
                        <span class="chip-icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16 7h6v6"/><path d="m22 7l-8.5 8.5l-5-5L2 17"/></g></svg></span>
                        <div class="chip-content">
                            <span class="chip-title">Salary Timeline</span>
                            <span class="chip-desc">See every raise in context</span>
                        </div>
                    </button>
                    <button class="feature-chip" data-tab="market">
                        <span class="chip-icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></g></svg></span>
                        <div class="chip-content">
                            <span class="chip-title">Market Benchmarks</span>
                            <span class="chip-desc">Know if you're paid fairly</span>
                        </div>
                    </button>
                    <button class="feature-chip" data-tab="analytics">
                        <span class="chip-icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3v16a2 2 0 0 0 2 2h16M7 11h8m-8 5h12M7 6h3"/></svg></span>
                        <div class="chip-content">
                            <span class="chip-title">Growth Analytics</span>
                            <span class="chip-desc">Track real purchasing power</span>
                        </div>
                    </button>
                    <button class="feature-chip" data-tab="projections">
                        <span class="chip-icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275zM5 3v4m14 14v-4M3 5h4m14 14h-4"/></svg></span>
                        <div class="chip-content">
                            <span class="chip-title">Future Projections</span>
                            <span class="chip-desc">Plan your financial future</span>
                        </div>
                    </button>
                </div>

                <div class="how-it-works">
                    <div class="how-step"><span class="how-num">1</span> Copy</div>
                    <span class="how-arrow">â†’</span>
                    <div class="how-step"><span class="how-num">2</span> Paste</div>
                    <span class="how-arrow">â†’</span>
                    <div class="how-step"><span class="how-num">3</span> Done!</div>
                </div>

                <div class="cta-row">
                    <!-- #112: Import Data is primary (main user action) -->
                    <button class="btn-landing-primary" id="openImportBtn">Import Your Data â†’</button>
                    <button class="btn-landing-secondary btn-demo">View Demo</button>
                </div>
            </div>

            <!-- Right Column: Browser Mockup with Slider -->
            <div class="landing-right">
                <div class="slider-wrapper">
                    <div class="slider-header">
                        <span class="slider-title">Before & After</span>
                        <span class="slider-tab-indicator" id="tabIndicator">Salary Timeline</span>
                    </div>
                    <div class="browser-window">
                        <div class="browser-titlebar">
                            <div class="traffic-lights">
                                <span class="traffic-light red"></span>
                                <span class="traffic-light yellow"></span>
                                <span class="traffic-light green"></span>
                            </div>
                            <div class="browser-url">
                                <span class="browser-url-icon">ðŸ”’</span>
                                <span id="browserUrl">tejasgadhia.github.io/paylocity-compensation-journey</span>
                            </div>
                        </div>
                        <div class="browser-content">
                            <img-comparison-slider id="comparisonSlider">
                                <!-- Before: Paylocity raw data -->
                                <img slot="first" id="beforeImg" src="screenshots/paylocity-blurred.webp" alt="Before: Paylocity interface">
                                <!-- After: Dashboard view (changes based on selected chip) -->
                                <img slot="second" id="afterImg" src="screenshots/tab-home.webp" alt="After: Dashboard view">
                                <div slot="handle" class="custom-handle">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M15 19l-7-7 7-7"/>
                                        <path d="M9 19l7-7-7-7" transform="translate(6,0)"/>
                                    </svg>
                                </div>
                            </img-comparison-slider>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer Disclaimer -->
        <footer class="landing-footer">
            <p>
                <strong>Legal Notice:</strong> This tool is not affiliated with, endorsed by, or supported by Paylocity.
                Use of this tool with Paylocity data is at your own risk. Review Paylocity's Terms of Service before proceeding.
                By using this tool, you accept full responsibility for ensuring compliance with applicable terms and policies.
            </p>
            <p class="feedback-link-container">
                <a href="https://github.com/tejasgadhia/paylocity-compensation-journey/issues/new?labels=bug&template=bug_report.md"
                   target="_blank"
                   rel="noopener noreferrer"
                   class="feedback-link">
                    Report a bug or request a feature â†’
                </a>
            </p>
        </footer>
    </div>

    <!-- ==========================================
         IMPORT MODAL
         ========================================== -->
    <div id="importModal" class="import-modal" role="dialog" aria-modal="true" aria-labelledby="importModalTitle">
        <div class="import-modal-content">
            <div class="import-modal-header">
                <h2 id="importModalTitle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></g></svg>
                    Import Your Data
                </h2>
                <span class="header-privacy-note">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></g></svg>
                    Your data stays on your device
                </span>
                <button class="import-modal-close" id="closeImportBtn" aria-label="Close import dialog">âœ•</button>
            </div>

            <div class="import-modal-body">
                <div class="instructions-box">
                    <div class="instructions-title">How to get your data from Paylocity</div>
                    <ol class="instructions-list">
                        <li>Log in to <a href="https://access.paylocity.com/" target="_blank" rel="noopener">access.paylocity.com</a></li>
                        <li>On your dashboard, click the <code>Pay</code> card heading</li>
                        <li>Click the <code>Show Private Data</code> button</li>
                        <li>Navigate to the <code>Rates</code> tab</li>
                        <li><strong>Select everything</strong> from the word <code>Rates</code> at the very top, all the way down to <code>items</code> at the bottom â€” include the Current section, History table, and pagination text</li>
                        <li>Copy (<kbd>Ctrl+C</kbd> / <kbd>Cmd+C</kbd>) and paste below</li>
                    </ol>
                </div>

                <div class="paste-area">
                    <label for="pasteInput">Paste your Paylocity data here</label>
                    <textarea id="pasteInput" placeholder="Rates
Current
Effective Date  Change Reason  Pay Type  Per Check  Annual Salary
01/15/2025  Merit Increase  Salary  $4,583.33  $110,000.00

History
02/01/2024  Merit Increase  Salary  $4,250.00  $102,000.00
03/15/2023  Market Adjustment  Salary  $3,958.33  $95,000.00
..."></textarea>
                    <div id="validationMessage" class="validation-message"></div>
                </div>
            </div>

            <div class="import-modal-footer">
                <button class="btn btn-primary btn-lg" id="generateBtn" disabled>Generate Dashboard</button>
                <span class="alt-data-action">or <button class="btn-text-alt" id="loadJsonBtn">load previously saved data</button></span>
                <button class="btn btn-secondary btn-sm hidden" id="restoreBackupBtn" style="margin-top: 0.5rem;">Restore Last Session</button>
                <input type="file" id="jsonFileInput" class="file-input" accept=".json">
            </div>
        </div>
    </div>

    <!-- ==========================================
         DASHBOARD
         ========================================== -->
    <div id="dashboardPage" class="hidden">
        <!-- DEMO BANNER -->
        <div id="demoBanner" class="demo-banner hidden" role="alert">
            <span class="demo-banner-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21.73 18l-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3M12 9v4m0 4h.01"/></svg></span>
            <span class="demo-banner-text">
                <strong>Demo Mode:</strong>
                <span id="scenarioLabel">Scenario 1: Growth Phase (5 years)</span>
            </span>
            <button class="demo-regenerate-btn" aria-label="Try another demo scenario">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 0 1 9-9a9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5m5 4a9 9 0 0 1-9 9a9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></g></svg> Try Another
            </button>
            <button class="demo-banner-close" aria-label="Dismiss demo banner">âœ•</button>
        </div>

        <!-- HEADER -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">CJ</div>
                    <div class="logo-text">
                        <h1>Compensation Journey</h1>
                        <span>Personal Dashboard</span>
                    </div>
                </div>
                <div class="header-controls">
                    <div class="view-switcher" role="group" aria-label="Value display mode">
                        <button class="view-btn active" data-view="dollars" aria-label="Show dollar values" aria-pressed="true">$</button>
                        <button class="view-btn" data-view="index" aria-label="Show indexed values" aria-pressed="false">Index</button>
                    </div>
                    <div class="theme-switcher" role="group" aria-label="Theme selection">
                        <button class="theme-btn" data-theme="tactical" aria-label="Dark tactical theme" aria-pressed="false">Tactical</button>
                        <button class="theme-btn active" data-theme="artistic" aria-label="Light artistic theme" aria-pressed="true">Artistic</button>
                    </div>
                    <button class="btn btn-success btn-compact btn-save-data" title="Download your data as JSON">Save Data</button>
                    <button class="btn btn-danger btn-compact btn-start-over" title="Clear data and return to input">Start Over</button>
                </div>
            </div>
        </header>

        <!-- KEYBOARD SHORTCUTS HINT -->
        <div class="keyboard-hint">
            <kbd>1</kbd>-<kbd>7</kbd> tabs Â· <kbd>T</kbd> theme Â· <kbd>V</kbd> view
        </div>

        <!-- TAB NAVIGATION -->
        <nav class="tabs-nav" aria-label="Dashboard sections">
            <div class="tabs-header" role="tablist">
                <button class="tab-btn active" id="tab-btn-home" data-tab="home" role="tab" aria-selected="true" aria-controls="tab-home">Home</button>
                <button class="tab-btn" id="tab-btn-story" data-tab="story" role="tab" aria-selected="false" aria-controls="tab-story">Story</button>
                <button class="tab-btn" id="tab-btn-market" data-tab="market" role="tab" aria-selected="false" aria-controls="tab-market">Market</button>
                <button class="tab-btn" id="tab-btn-history" data-tab="history" role="tab" aria-selected="false" aria-controls="tab-history">History</button>
                <button class="tab-btn" id="tab-btn-analytics" data-tab="analytics" role="tab" aria-selected="false" aria-controls="tab-analytics">Analytics</button>
                <button class="tab-btn" id="tab-btn-projections" data-tab="projections" role="tab" aria-selected="false" aria-controls="tab-projections">Projections</button>
                <button class="tab-btn" id="tab-btn-help" data-tab="help" role="tab" aria-selected="false" aria-controls="tab-help">Help</button>
            </div>
        </nav>

        <!-- MAIN CONTENT -->
        <main class="main-container" id="main-content">
            <!-- HOME TAB -->
            <div class="tab-content active" id="tab-home" role="tabpanel" aria-labelledby="tab-btn-home">
            <!-- HERO METRICS -->
            <!-- #69: Restructured to match Analytics tab card layout -->
            <section class="hero-section">
                <div class="metrics-grid">
                    <div class="metric-card animate-in animate-delay-1">
                        <div class="metric-label">Current Compensation</div>
                        <div class="metric-row">
                            <div class="metric-value highlight" id="currentSalary">$281,600</div>
                            <div class="metric-detail" id="currentSalaryIndexed">Index: 704</div>
                        </div>
                        <div class="metric-help">Most recent annual base salary, excluding bonuses or equity.</div>
                    </div>
                    <div class="metric-card animate-in animate-delay-2">
                        <div class="metric-label">Total Growth</div>
                        <div class="metric-row">
                            <div class="metric-value" id="totalGrowth">+604%</div>
                            <div class="metric-detail" id="totalGrowthSubtext">Since hire</div>
                        </div>
                        <div class="metric-help">Percentage increase from your starting salary to current.</div>
                    </div>
                    <div class="metric-card animate-in animate-delay-3">
                        <div class="metric-label">Years of Service</div>
                        <div class="metric-row">
                            <div class="metric-value" id="yearsService">12.8</div>
                            <div class="metric-detail" id="hireDateText">Since Mar 2012</div>
                        </div>
                        <div class="metric-help">Time elapsed from hire date to most recent adjustment.</div>
                    </div>
                    <div class="metric-card animate-in animate-delay-4">
                        <div class="metric-label">Total Adjustments</div>
                        <div class="metric-row">
                            <div class="metric-value" id="totalRaises">19</div>
                            <div class="metric-detail" id="avgRaisesPerYear">Avg: 1.5 per year</div>
                        </div>
                        <div class="metric-help">All compensation changes: merit, equity, and market adjustments.</div>
                    </div>
                </div>
            </section>

            <!-- MAIN CHART -->
            <section class="chart-section animate-in animate-delay-500">
                <div class="chart-header">
                    <h2 class="chart-title">
                        Compensation Timeline
                        <span class="info-tooltip"><span class="tip-text">Visual representation of your salary progression over time. Each point represents a compensation adjustment. Hover over points for details.</span></span>
                    </h2>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-controls chart-controls-inline">
                        <button class="chart-type-btn active" data-chart="line">Line</button>
                        <button class="chart-type-btn" data-chart="bar">Bar</button>
                        <button class="chart-type-btn" data-chart="area">Area</button>
                        <button class="chart-type-btn" data-chart="step">Step</button>
                    </div>
                    <div class="chart-loading" id="mainChartLoading">Loading chart...</div>
                    <canvas id="mainChart"></canvas>
                </div>
            </section>
            </div>

            <!-- TABS -->
            <section class="tabs-container">
                <!-- STORY TAB -->
                <div class="tab-content" id="tab-story" role="tabpanel" aria-labelledby="tab-btn-story">
                    <div class="story-container">
                        <div class="story-header">
                            <h2 id="storyTitle">Mission Debrief: Compensation Trajectory</h2>
                            <p class="subtitle" id="storySubtitle">Classification: Personnel Asset Valuation Report</p>
                        </div>
                        <div class="story-content">
                            <div class="story-text" id="storyText"></div>
                        </div>
                        <div class="milestones-section">
                            <h3 class="milestones-title">
                                Key Milestones Achieved
                                <span class="info-tooltip"><span class="tip-text">Automatically detected career achievements based on your compensation history.</span></span>
                            </h3>
                            <div class="milestone-grid" id="milestonesGrid"></div>
                        </div>
                    </div>
                </div>

                <!-- MARKET TAB -->
                <div class="tab-content" id="tab-market" role="tabpanel" aria-labelledby="tab-btn-market">
                    <div class="market-tab-container">
                        <div class="market-header">
                            <h2 id="marketTitle">Market Position Analysis</h2>
                            <p class="subtitle" id="marketSubtitle">How your compensation compares to B2B SaaS industry benchmarks</p>
                        </div>

                        <div class="market-summary-cards">
                            <div class="market-summary-card" id="marketSummaryCard">
                                <div class="market-summary-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 21v-6m7 6V9m7 12V3"/></svg></div>
                                <div class="market-summary-content">
                                    <div class="market-summary-headline" id="marketSummaryHeadline">Loading...</div>
                                    <div class="market-summary-detail" id="marketSummaryDetail"></div>
                                </div>
                            </div>
                        </div>

                        <div class="market-section">
                            <h3 class="market-title">
                                Key Metrics vs Industry
                                <span class="info-tooltip"><span class="tip-text">Your compensation metrics compared to B2B SaaS industry benchmarks. Data compiled from Radford, Mercer, and industry surveys.</span></span>
                            </h3>
                            <div class="market-grid" id="marketComparisonGrid"></div>
                        </div>

                        <div class="market-section">
                            <h3 class="market-title">
                                Inflation & Purchasing Power
                                <span class="info-tooltip"><span class="tip-text">How inflation has impacted your real earnings over time. CPI data from Bureau of Labor Statistics.</span></span>
                            </h3>
                            <div class="inflation-analysis" id="inflationAnalysis"></div>
                        </div>

                        <div class="benchmark-sources">
                            <div class="benchmark-sources-header">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m16 6l4 14M12 6v14M8 8v12M4 4v16"/></svg></span> Data Sources & Methodology
                            </div>

                            <!-- Regional Context (#147) -->
                            <div class="market-context-banner" style="margin-bottom: var(--space-4);">
                                <span class="context-icon">ðŸŒŽ</span>
                                <span>
                                    Benchmarks based on <strong>United States</strong> B2B SaaS market data.
                                    Primarily tech hubs (SF Bay, NYC, Seattle, Austin, Boston).
                                </span>
                            </div>

                            <div class="benchmark-sources-list">
                                <div class="benchmark-source-item">
                                    <span class="source-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 21v-6m7 6V9m7 12V3"/></svg></span>
                                    <span>
                                        <span class="source-label">Salary Benchmarks:</span>
                                        <span class="data-freshness fresh">Updated Q4 2024</span>
                                        Compiled from <a href="https://radford.aon.com/" target="_blank" rel="noopener" class="source-link">Radford Global Technology Survey</a>, <a href="https://www.mercer.com/solutions/total-rewards/compensation-benchmarking/" target="_blank" rel="noopener" class="source-link">Mercer Total Remuneration Survey</a>, <a href="https://www.levels.fyi/" target="_blank" rel="noopener" class="source-link">Levels.fyi</a>, and <a href="https://www.glassdoor.com/Salaries/" target="_blank" rel="noopener" class="source-link">Glassdoor</a> B2B SaaS compensation data
                                    </span>
                                </div>
                                <div class="benchmark-source-item">
                                    <span class="source-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16 7h6v6"/><path d="m22 7l-8.5 8.5l-5-5L2 17"/></g></svg></span>
                                    <span>
                                        <span class="source-label">Inflation Data:</span>
                                        <span class="data-freshness fresh">Updated Dec 2024</span>
                                        <a href="https://www.bls.gov/cpi/" target="_blank" rel="noopener" class="source-link">U.S. Bureau of Labor Statistics</a> Consumer Price Index (CPI-U), Annual Averages
                                    </span>
                                </div>
                                <div class="benchmark-source-item">
                                    <span class="source-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12 10h.01M12 14h.01M12 6h.01M16 10h.01M16 14h.01M16 6h.01M8 10h.01M8 14h.01M8 6h.01M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"/><rect width="16" height="20" x="4" y="2" rx="2"/></g></svg></span>
                                    <span>
                                        <span class="source-label">Industry CAGR:</span>
                                        <span class="data-freshness fresh">Updated Q3 2024</span>
                                        Based on 6% average compensation growth in B2B SaaS sector, derived from industry surveys and public company filings
                                    </span>
                                </div>
                            </div>

                            <!-- Methodology & Limitations (Collapsible) (#147) -->
                            <details class="methodology-details">
                                <summary>View Methodology & Limitations</summary>
                                <div class="methodology-content">
                                    <h4>Data Collection</h4>
                                    <ul>
                                        <li><strong>Typical Raise:</strong> Median annual merit increases for individual contributor roles in B2B SaaS, adjusted for inflation. Based on Radford Global Technology Survey 2024 with 5,000+ sampled roles.</li>
                                        <li><strong>High Performer Raise:</strong> Top quartile performance-based raises from Radford survey data.</li>
                                        <li><strong>Promotion Bump:</strong> Average salary increase for internal promotions, compiled from Mercer TRS 2024 and Levels.fyi.</li>
                                        <li><strong>Industry CAGR:</strong> Weighted average of compensation growth from public SaaS company SEC filings and industry surveys (2023-2024).</li>
                                    </ul>
                                    <h4>Known Limitations</h4>
                                    <ul>
                                        <li><strong>Geographic:</strong> Data primarily from US markets (SF Bay Area, NYC, Seattle, Austin, Boston). May not reflect compensation in other regions or countries.</li>
                                        <li><strong>Role Scope:</strong> Covers individual contributor and mid-level management roles. Executive compensation follows different patterns.</li>
                                        <li><strong>Company Stage:</strong> Focused on growth-stage B2B SaaS companies (Series B through public). Early-stage startups may differ significantly.</li>
                                        <li><strong>Timeframe:</strong> Based on 2023-2024 compensation data. Market conditions change over time.</li>
                                        <li><strong>Individual Variation:</strong> Your specific role, seniority, company, location, and performance will cause significant variation from these averages.</li>
                                    </ul>
                                </div>
                            </details>
                            <div class="benchmark-disclaimer">
                                <span class="benchmark-disclaimer-label">Important Limitations</span>
                                Benchmarks are derived from
                                <strong>United States</strong> B2B SaaS market data (2023-2024), primarily
                                from major tech hubs. Individual compensation varies significantly by:
                                <ul style="margin-top: var(--space-2); padding-left: var(--space-5);">
                                    <li>Specific role and seniority level</li>
                                    <li>Geographic location (cost of living adjustments)</li>
                                    <li>Company stage (early-stage vs. public)</li>
                                    <li>Individual performance and negotiation</li>
                                </ul>
                                <p style="margin-top: var(--space-3); margin-bottom: 0;">This tool provides general context only and should not be considered
                                financial or career advice. Verify benchmark data relevance to your
                                specific situation.</p>
                            </div>

                            <!-- Market Footnote (#147) -->
                            <div class="market-footnote" id="marketFootnote"></div>
                        </div>
                    </div>
                </div>

                <!-- HISTORY TAB -->
                <div class="tab-content" id="tab-history" role="tabpanel" aria-labelledby="tab-btn-history">
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Effective Date</th>
                                    <th>Reason</th>
                                    <th>Annual Salary</th>
                                    <th>Index</th>
                                    <th>Change</th>
                                    <th>% Change</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ANALYTICS TAB - #138: Redesigned KPI cards with inline help -->
                <div class="tab-content" id="tab-analytics" role="tabpanel" aria-labelledby="tab-btn-analytics">
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <div class="analytics-card-title">Compound Annual Growth Rate</div>
                            <div class="analytics-card-row">
                                <div class="analytics-card-value" id="cagr">16.4%</div>
                                <div class="analytics-card-detail">Average annual growth over career</div>
                            </div>
                            <div class="analytics-card-help">Smoothed annual growth rate across your tenure.</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-card-title">Average Raise</div>
                            <div class="analytics-card-row">
                                <div class="analytics-card-value" id="avgRaise">12.7%</div>
                                <div class="analytics-card-detail" id="avgRaiseDollar">~$12,700 per adjustment</div>
                            </div>
                            <div class="analytics-card-help">Simple average of all your raise percentages.</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-card-title">Median Raise</div>
                            <div class="analytics-card-row">
                                <div class="analytics-card-value" id="medianRaise">11.2%</div>
                                <div class="analytics-card-detail">Middle value of all raises</div>
                            </div>
                            <div class="analytics-card-help">The middle value when raises are sorted.</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-card-title">Largest Single Increase</div>
                            <div class="analytics-card-row">
                                <div class="analytics-card-value" id="largestRaise">29.5%</div>
                                <div class="analytics-card-detail" id="largestRaiseDate">April 2015</div>
                            </div>
                            <div class="analytics-card-help">Your biggest raise in a single adjustment.</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-card-title">Avg. Time Between Raises</div>
                            <div class="analytics-card-row">
                                <div class="analytics-card-value" id="avgTimeBetween">8.1 mo</div>
                                <div class="analytics-card-detail" id="avgTimeDetail">Industry standard: 12 months</div>
                            </div>
                            <div class="analytics-card-help">How frequently you receive compensation adjustments.</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-card-title">Merit Increases</div>
                            <div class="analytics-card-row">
                                <div class="analytics-card-value" id="meritCount">14</div>
                                <div class="analytics-card-detail" id="meritPercent">73.7% of all adjustments</div>
                            </div>
                            <div class="analytics-card-help">Raises categorized as performance-based rewards.</div>
                        </div>
                    </div>

                    <div class="chart-section">
                        <div class="chart-header">
                            <h2 class="chart-title">Annual Salary Change Rate</h2>
                        </div>
                        <div class="chart-wrapper">
                            <div class="chart-controls chart-controls-inline">
                                <button class="chart-type-btn active" data-chart="yoy-bar">Bar</button>
                                <button class="chart-type-btn" data-chart="yoy-line">Line</button>
                            </div>
                            <canvas id="yoyChart"></canvas>
                        </div>
                    </div>

                </div>

                <!-- PROJECTIONS TAB -->
                <div class="tab-content" id="tab-projections" role="tabpanel" aria-labelledby="tab-btn-projections">
                    <div class="projections-intro">
                        <h2>Future Compensation Projections</h2>
                        <p>Explore potential salary growth scenarios. Adjust the raise percentage to see how different growth rates would impact your compensation over time.</p>
                    </div>

                    <!-- #94: Dedicated controls box above chart -->
                    <div class="projections-controls-box">
                        <div class="projections-controls-row">
                            <!-- Slider control -->
                            <div class="projection-slider-group">
                                <label for="customRateSlider" class="slider-label">What if raises average</label>
                                <div class="slider-with-value">
                                    <input type="range" min="0" max="25" value="8" id="customRateSlider" aria-label="Average raise percentage">
                                    <span class="slider-value" id="customRateValue">8%</span>
                                </div>
                                <span class="slider-context">(Your historical: <span id="historicalRateDisplay">--</span>)</span>
                            </div>

                            <!-- Time period buttons (#95: segmented control) -->
                            <div class="projections-control-group">
                                <span class="control-group-label">Time Period</span>
                                <div class="interval-buttons">
                                    <button class="interval-btn" data-years="1">1 yr</button>
                                    <button class="interval-btn" data-years="3">3 yr</button>
                                    <button class="interval-btn active" data-years="5">5 yr</button>
                                    <button class="interval-btn" data-years="10">10 yr</button>
                                    <button class="interval-btn" data-years="20">20 yr</button>
                                </div>
                            </div>

                            <!-- Chart/Table toggle (#96: larger, aligned) -->
                            <div class="projections-control-group">
                                <span class="control-group-label">View</span>
                                <div class="chart-controls">
                                    <button class="chart-type-btn active" data-view="chart">Chart</button>
                                    <button class="chart-type-btn" data-view="table">Table</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-section projections-chart-section">
                        <div class="chart-wrapper" id="projectionChartWrapper">
                            <canvas id="projectionChart"></canvas>
                        </div>
                        <div class="projections-table hidden" id="projectionTableWrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Year</th>
                                        <th>Historical CAGR</th>
                                        <th>Conservative (3%)</th>
                                        <th>Custom Rate</th>
                                    </tr>
                                </thead>
                                <tbody id="projectionTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- HELP TAB -->
                <div class="tab-content" id="tab-help" role="tabpanel" aria-labelledby="tab-btn-help">
                    <!-- #97: Core Concepts Section -->
                    <div class="help-section">
                        <h2 class="help-section-header">Core Concepts</h2>
                        <div class="help-section-grid">
                            <div class="help-card">
                                <h3>CAGR (Compound Annual Growth Rate)</h3>
                                <p>CAGR represents the mean annual growth rate over a specified time period, smoothing out volatility to show consistent growth.</p>
                                <!-- #98: Proper formula display -->
                                <div class="formula-block">
                                    <code>CAGR = (Final Ã· Initial)<sup>1/years</sup> âˆ’ 1</code>
                                    <div class="formula-legend">
                                        <span><strong>Final</strong> = ending salary</span>
                                        <span><strong>Initial</strong> = starting salary</span>
                                        <span><strong>years</strong> = time period</span>
                                    </div>
                                </div>
                            </div>
                            <div class="help-card">
                                <h3>Adjustment Categories</h3>
                                <p><strong>Merit Increase:</strong> Performance-based raise reflecting your contributions.</p>
                                <p><strong>Equity:</strong> Internal fairness alignment with peers in similar roles.</p>
                                <p><strong>Market Adjustment:</strong> Response to external market compensation data.</p>
                                <p><strong>New Hire:</strong> Your starting compensation when joining.</p>
                            </div>
                        </div>
                    </div>

                    <!-- #97: Your Data Section -->
                    <div class="help-section">
                        <h2 class="help-section-header">Your Data</h2>
                        <div class="help-section-grid">
                            <div class="help-card">
                                <h3>Understanding Indexed Values</h3>
                                <p>When privacy mode is enabled, salary values are shown as an index where your starting salary equals <code>100</code>.</p>
                                <p>An index of <code>704</code> means your current compensation is 7.04Ã— your starting salaryâ€”useful for sharing without revealing actual numbers.</p>
                            </div>
                            <div class="help-card">
                                <h3>Saving Your Data</h3>
                                <p>Click <code>Save Data</code> to download a JSON file containing your parsed compensation history.</p>
                                <p>Load it later with <code>Load Saved Data</code> on the landing pageâ€”no need to re-paste from Paylocity.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Security & Privacy Section -->
                    <div class="help-section" id="security-privacy-section">
                        <h2 class="help-section-header">Security & Privacy</h2>
                        <div class="help-section-grid">
                            <div class="help-card help-card--featured">
                                <h3>ðŸ”’ Privacy Promise</h3>
                                <p>Your salary data <strong>never leaves your device</strong>. This tool runs 100% in your browser with zero server communication. No analytics, no tracking, no data collection of any kind.</p>
                                <p>The only data stored is your theme preference (light/dark mode) in localStorageâ€”nothing else.</p>
                            </div>

                            <div class="help-card">
                                <h3>Does it really work offline?</h3>
                                <p>Yes! Test it yourself:</p>
                                <ol style="margin-top: var(--space-3); padding-left: var(--space-5);">
                                    <li style="margin-bottom: var(--space-2);">Right-click this page â†’ <strong>Save Page As</strong></li>
                                    <li style="margin-bottom: var(--space-2);">Disconnect from the internet (turn off WiFi)</li>
                                    <li style="margin-bottom: var(--space-2);">Open the saved file â€” everything still works</li>
                                    <li>Import your Paylocity data â€” it processes entirely offline</li>
                                </ol>
                            </div>

                            <div class="help-card">
                                <h3>Can I see the code?</h3>
                                <p>Absolutely. Everything is public:</p>
                                <ul style="margin-top: var(--space-3); padding-left: var(--space-5);">
                                    <li style="margin-bottom: var(--space-2);"><a href="https://github.com/tejasgadhia/paylocity-compensation-journey" target="_blank" rel="noopener noreferrer" class="help-link">View source on GitHub</a> â€” all code is public</li>
                                    <li style="margin-bottom: var(--space-2);">Search for <code>fetch()</code>, <code>XMLHttpRequest</code>, or <code>navigator.sendBeacon</code> â€” you won't find any</li>
                                    <li>No third-party dependencies (except Chart.js, self-hosted with SRI)</li>
                                </ul>
                            </div>

                            <div class="help-card">
                                <h3>How do I verify it's safe?</h3>
                                <p>Monitor network activity in real-time:</p>
                                <ul style="margin-top: var(--space-3); padding-left: var(--space-5);">
                                    <li style="margin-bottom: var(--space-2);">Open DevTools (<kbd>F12</kbd> or <kbd>Cmd+Option+I</kbd>)</li>
                                    <li style="margin-bottom: var(--space-2);">Click the <strong>Network</strong> tab and clear existing requests</li>
                                    <li>Import your data and interact with the tool â€” you'll see zero new requests</li>
                                </ul>
                            </div>

                            <div class="help-card">
                                <h3>What security measures exist?</h3>
                                <p>Multiple layers of protection:</p>
                                <ul style="margin-top: var(--space-3); padding-left: var(--space-5);">
                                    <li style="margin-bottom: var(--space-2);">Content Security Policy blocks all external connections at the browser level</li>
                                    <li style="margin-bottom: var(--space-2);">XSS protections: All user input is sanitized using <code>textContent</code></li>
                                    <li><a href="https://github.com/tejasgadhia/paylocity-compensation-journey/blob/main/SECURITY.md" target="_blank" rel="noopener noreferrer" class="help-link">SECURITY.md</a> â€” Privacy audit checklist, threat model</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- FOOTER -->
        <footer class="footer">
            <p>
                Compensation Journey Dashboard â€¢ 100% Local Processing â€¢ Your data never leaves your device
                <br>
                <a href="https://github.com/tejasgadhia/paylocity-compensation-journey"
                   target="_blank" rel="noopener noreferrer" class="footer-link">
                    View Source on GitHub
                </a>
                â€¢
                <a href="#" class="footer-link" id="footerSecurityLink">Security & Privacy</a>
            </p>
        </footer>
    </div>

    <!-- Image Comparison Slider Web Component -->
    <script type="module" src="assets/js/img-comparison-slider.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>
